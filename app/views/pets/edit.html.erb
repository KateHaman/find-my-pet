<% provide(:page_title, 'Edit Pet Profile') %>
<% provide(:profile_active, 'active') %>

<div class="row mt-5">
  <div class="col-2">
    <%= link_to t('.back'), user_path(current_user), class: 'btn btn-outline-dark' %>
  </div>
  <div class="col-10 text-center">
    <% if @pet.name? %>
      <h2 class="m-0"><%= t('.edit') %> <%= t('.profile') %> <%= (@pet.name).upcase %><%= t('.pet') %></h2>
    <% else %>
      <h2 class="m-0"><%= t('.editProfile') %></h2>
    <% end %>
  </div>
</div>

<%= form_with(model: [@user, @pet]) do |form| %>
  <% if @pet.errors.any? %>
    <div class="text-center text-danger mt-2" id="error_explanation">
      <h4>
        <%= pluralize(@pet.errors.count, "error") %>
        <%= t('.prohibit') %>:
      </h4>

      <% @pet.errors.full_messages.each do |msg| %>
        <%= msg %><br>
      <% end %>
    </div>
  <% end %>

  <div class="row mt-2">
    <div class="col-12 text-center col-md-4 mt-4">
      <% if @pet.avatar.attached? %>
        <%= image_tag @pet.avatar, style: 'object-fit: cover; width: 100%', class: 'border border-dark' %>
      <% else %>
        <% if @pet.cat? %>
          <%= image_tag("cat.jpg", style: 'object-fit: cover; width: 100%', class: 'border border-dark') %>
        <% elsif @pet.dog? %>
          <%= image_tag("dog.jpg", style: 'object-fit: cover; width: 100%', class: 'border border-dark') %>
        <% end %>
      <% end %>
      <% if @pet.name? %>
        <p class="p-0 m-0 fw-bold"><%= t('.upload') %> <%= @pet.name %> <%= t('.below') %>!</p>
      <% else %>
        <p class="p-0 m-0 fw-bold"><%= t('.uploadAvatar') %>!</p>
      <% end %>
      <%= form.file_field :avatar, class: 'form-control' %>
    </div>

    <div class="col-0 col-md-3">
    </div>

    <div class="col-12 text-center mt-4 col-md-5 col-lg-4">
      <div class="field">
        <%== form.text_field :name, class: 'form-control', placeholder: t('.name') %>
      </div>

      <div class="field">
        <p class="p-0 m-0"><b><%= t('.petIs') %>:</b></p>
        <%= form.select(:species, Pet.species.map { |k, v| [k.humanize, k] }, { prompt: t('.speciesPrompt') }, { class: 'form-select mb-2' }) %>
      </div>

      <div class="field">
        <%== form.text_field :breed, class: 'form-control mb-2', placeholder: t('.breed') %>
      </div>

      <div class="field">
        <p class="mb-0"><b><%= t('.genderSelect') %>:</b></p>
        <p class="mb-0"><%= form.radio_button :sex, 'male', checked: true, class: 'form-check-input me-2' %> <%= t('.male') %></p>
        <p class="mb-0"><%= form.radio_button :sex, 'female', class: 'form-check-input me-2' %> <%= t('.female') %></p>
        <p class="mb-2"><%= form.radio_button :sex, 'undefined', class: 'form-check-input me-2' %> <%= t('.preferNotSay') %></p>
      </div>

      <div class="field">
        <p class="mb-2">
          <%= form.check_box :sterilized, class: 'form-check-input' %>
          <b><%= form.label :sterilized, t('.sterile'), class: 'ms-2 font-bold' %></b>
        </p>
      </div>

      <div class="field input-group-text mb-2 text-muted">
    <span><b><%= t('.birthday') %>:</b><br>
      <%= form.date_select(:date_of_birth, order: [:day, :month, :year], start_year: Date.current.year, end_year: Date.current.year - 15) %></span>
      </div>

      <div class="field">
        <%== form.text_field :color, class: 'form-control mb-2', placeholder: t('.color') %>
      </div>

      <div class="field">
        <%== form.text_area :additional_info, class: 'form-control mb-4', placeholder: t('.addInfo') %>
      </div>
    </div>

    <div class="container d-flex justify-content-center">
      <%= form.submit t('.updatePet'), class: 'btn btn-dark mb-4 mt-4' %>
    </div>
<% end %>
</div>
